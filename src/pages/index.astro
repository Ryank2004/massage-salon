---
import Layout from "../layouts/Layout.astro";
import Spinner from "../components/spinner.astro";
---

<Layout>
	<section class="hero">
		<div class="hero-content">
			<h1 class="hero-title">
				Jouw moment van rust begint bij Zensation
			</h1>
			<div class="main-content">
				<p>
					Ervaar de ultieme ontspanning. Laat stress los en kom
					volledig tot rust met onze professionele massages.
				</p>
				<a
					>boek nu jouw moment van rust
					<div>
						<svg
							fill="#53584e"
							height="24"
							viewBox="0 -960 960 960"
							width="24"
							xmlns="http://www.w3.org/2000/svg"
							><path
								d="m700-300-57-56 84-84h-607v-80h607l-83-84 57-56 179 180z"
							></path></svg
						>
					</div>
				</a>
				<a
					>of bekijk onze behandelingen
					<div>
						<svg
							fill="#53584e"
							height="24"
							viewBox="0 -960 960 960"
							width="24"
							xmlns="http://www.w3.org/2000/svg"
							><path
								d="m700-300-57-56 84-84h-607v-80h607l-83-84 57-56 179 180z"
							></path></svg
						>
					</div>
				</a>
			</div>
		</div>
		<div class="main-content">
			<div class="spinner-container left">
				<Spinner />
			</div>
			<div class="hero-image">
				<img
					src="/images/zweedse-massage.webp"
					alt="massagesalon"
					width="900px"
					height="600px"
				/>
			</div>
		</div>
	</section>

	<section class="over">
		<div class="over-content">
			<h2>Over Zensation</h2>
			<div class="content-wrapper">
				<p>
					Al 20 jaar bieden wij in het hart van Amsterdam Zuid een
					plek waar je kunt ontsnappen aan de drukte en volledig tot
					rust kunt komen. Onze massages zijn meer dan alleen een
					behandeling, ze zijn een moment van aandacht, herstel en
					ontspanning.<br />
					<br />
					Of je nu op zoek bent naar diepe ontspanning, spierherstel of
					stressverlichting, ons ervaren team zorgt ervoor dat jij je herboren
					voelt.
					<br />
					Met een warme, rustgevende sfeer en persoonlijke aandacht zorgen
					we ervoor dat iedere massage volledig is afgestemd op jouw behoeften.
				</p>
				<a
					>Boek nu jouw moment van rust
					<div>
						<svg
							fill="#53584e"
							height="24"
							viewBox="0 -960 960 960"
							width="24"
							xmlns="http://www.w3.org/2000/svg"
							><path
								d="m700-300-57-56 84-84h-607v-80h607l-83-84 57-56 179 180z"
							></path></svg
						>
					</div>
				</a>
			</div>
		</div>
		<div class="hero-image">
			<img
				src="/images/ontspanningsmassage.webp"
				alt="massagesalon"
				width="900px"
				height="600px"
			/>
		</div>
	</section>
	<section class="behandelingen">
		<div class="spinner">
			<div class="spinner-container right">
				<Spinner />
			</div>
		</div>
		<h2>Behandelingen</h2>
		<p class="behandelingen-text">
			Ontdek onze zorgvuldig samengestelde behandelingen en kies wat jouw
			lichaam nodig heeft.
		</p>
		<ul>
			<li>
				<a
					>Ontspanningsmassage
					<div>
						<svg
							class="behandelingen-button"
							xmlns="http://www.w3.org/2000/svg"
							height="24px"
							viewBox="0 -960 960 960"
							width="24px"
							fill="currentColor"
							><path
								d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"
							></path></svg
						>
					</div>
				</a>
				<p class="behandelingen-info">
					Lorem ipsum dolor sit amet consectetur adipisicing elit.
					Illum molestiae maiores quaerat debitis alias odit magnam
					vitae iusto architecto. Nesciunt voluptatibus saepe
					reprehenderit totam dignissimos inventore, veniam magni qui
					pariatur?
				</p>
			</li>
			<li>
				<a
					>Deep Tissue Massage
					<div>
						<svg
							class="behandelingen-button"
							xmlns="http://www.w3.org/2000/svg"
							height="24px"
							viewBox="0 -960 960 960"
							width="24px"
							fill="currentColor"
							><path
								d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"
							></path></svg
						>
					</div>
				</a>
				<p class="behandelingen-info">
					Lorem ipsum dolor sit amet consectetur adipisicing elit.
					Illum molestiae maiores quaerat debitis alias odit magnam
					vitae iusto architecto. Nesciunt voluptatibus saepe
					reprehenderit totam dignissimos inventore, veniam magni qui
					pariatur?
				</p>
			</li>
			<li>
				<a
					>Hot Stone Massage
					<div>
						<svg
							class="behandelingen-button"
							xmlns="http://www.w3.org/2000/svg"
							height="24px"
							viewBox="0 -960 960 960"
							width="24px"
							fill="currentColor"
							><path
								d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"
							></path></svg
						>
					</div>
				</a>
				<p class="behandelingen-info">
					Lorem ipsum dolor sit amet consectetur adipisicing elit.
					Illum molestiae maiores quaerat debitis alias odit magnam
					vitae iusto architecto. Nesciunt voluptatibus saepe
					reprehenderit totam dignissimos inventore, veniam magni qui
					pariatur?
				</p>
			</li>
			<li>
				<a
					>Hoofdpijn- & Nekmassage
					<div>
						<svg
							class="behandelingen-button"
							xmlns="http://www.w3.org/2000/svg"
							height="24px"
							viewBox="0 -960 960 960"
							width="24px"
							fill="currentColor"
							><path
								d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"
							></path></svg
						>
					</div>
				</a>
				<p class="behandelingen-info">
					Lorem ipsum dolor sit amet consectetur adipisicing elit.
					Illum molestiae maiores quaerat debitis alias odit magnam
					vitae iusto architecto. Nesciunt voluptatibus saepe
					reprehenderit totam dignissimos inventore, veniam magni qui
					pariatur?
				</p>
			</li>
			<li>
				<a
					>Dry needling
					<div>
						<svg
							class="behandelingen-button"
							xmlns="http://www.w3.org/2000/svg"
							height="24px"
							viewBox="0 -960 960 960"
							width="24px"
							fill="currentColor"
							><path
								d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"
							></path></svg
						>
					</div>
				</a>
				<p class="behandelingen-info">
					Lorem ipsum dolor sit amet consectetur adipisicing elit.
					Illum molestiae maiores quaerat debitis alias odit magnam
					vitae iusto architecto. Nesciunt voluptatibus saepe
					reprehenderit totam dignissimos inventore, veniam magni qui
					pariatur?
				</p>
			</li>
			<li>
				<a
					>Cupping
					<div>
						<svg
							class="behandelingen-button"
							xmlns="http://www.w3.org/2000/svg"
							height="24px"
							viewBox="0 -960 960 960"
							width="24px"
							fill="currentColor"
							><path
								d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"
							></path></svg
						>
					</div>
				</a>
				<p class="behandelingen-info">
					Lorem ipsum dolor sit amet consectetur adipisicing elit.
					Illum molestiae maiores quaerat debitis alias odit magnam
					vitae iusto architecto. Nesciunt voluptatibus saepe
					reprehenderit totam dignissimos inventore, veniam magni qui
					pariatur?
				</p>
			</li>
		</ul>
	</section>
	<section class="contact">
		<div class="contact-content">
			<h2>Contact</h2>
			<p><span>E-mailadres:</span> info@zensation.nl</p>
			<p><span>Telefoonnummer:</span> 020-12345678</p>
			<p><span>Adres:</span> Amsterdam-Zuid</p>
			<a
				>Boek nu jouw moment van rust
				<div>
					<svg
						fill="#53584e"
						height="24"
						viewBox="0 -960 960 960"
						width="24"
						xmlns="http://www.w3.org/2000/svg"
						><path
							d="m700-300-57-56 84-84h-607v-80h607l-83-84 57-56 179 180z"
						></path></svg
					>
				</div>
			</a>
		</div>
		<div class="kaart" style="width: 100%">
			<iframe
				width="100%"
				height="600"
				frameborder="0"
				scrolling="no"
				src="https://maps.google.com/maps?width=100%&height=600&hl=en&q=Amsterdam-zuid(Sensation)&t=&z=14&ie=UTF8&iwloc=B&output=embed"
			>
			</iframe>
		</div>
	</section>
</Layout>
<script is:inline>
	const buttons = document.querySelectorAll(".behandelingen-button");
	const infoElements = document.querySelectorAll(".behandelingen-info");

	buttons.forEach((button, index) => {
		button.addEventListener("click", () => {
			// Zorg ervoor dat het juiste info-element wordt aangesproken
			const info = infoElements[index];

			// Toggle een bepaalde klasse, bijvoorbeeld 'active'
			button.classList.toggle("rotate");
			info.classList.toggle("active");
		});
	});

	document.addEventListener("DOMContentLoaded", () => {
		gsap.registerPlugin(ScrollTrigger);

		function textAnimationOnScroll(selector, config = {}) {
			const {
				start = "-300px center",
				end = "200px center",
				scrub = true,
				markers = false, // markers default op false zodat je zelf kan kiezen
				from = { opacity: 0, y: 50 },
				to = { opacity: 1, y: 0 },
				duration = 1,
				ease = "power2.out",
			} = config;

			gsap.set(selector, from);

			gsap.to(selector, {
				...to,
				duration,
				ease,
				scrollTrigger: {
					trigger: selector,
					start,
					end,
					markers,
					scrub,
				},
			});
		}

		textAnimationOnScroll(".content-wrapper", {
			start: "-300px center",
			end: "200px center",
			markers: false,
		});
		textAnimationOnScroll(".behandelingen p", {
			start: "-150px 80%",
			end: "200px 80%",
			markers: false,
		});
		textAnimationOnScroll(".contact p");
		textAnimationOnScroll(".contact a");

		gsap.utils.toArray(".behandelingen ul li").forEach((item, i) => {
			gsap.set(item, { opacity: 0, yPercent: 50 });

			gsap.to(item, {
				opacity: 1,
				yPercent: 0,
				duration: 0.8,
				ease: "power2.out",
				scrollTrigger: {
					trigger: item,
					start: "top 90%",
					end: "top 60%",
					scrub: true,
					markers: false,
				},
			});
		});

		// 1. Split de tekst in lijnen
		const myTitle = new window.SplitType(".hero-title", {
			types: "lines",
			lineClass: "line", // zorgt dat elke lijn de class 'line' krijgt
		});

		console.log("SplitType lines:", myTitle.lines);

		// 2. Voeg wrappers toe rond elke lijn (voor clip-path of overflow hidden effecten)
		myTitle.lines.forEach((line) => {
			const wrapper = document.createElement("div");
			wrapper.classList.add("line-wrapper-title");

			// Plaats de wrapper vóór de lijn in de DOM en verplaats de lijn erin
			line.parentNode.insertBefore(wrapper, line);
			wrapper.appendChild(line);
		});

		// 3. Animeren van de lijnen
		gsap.fromTo(
			".line", // target nog steeds de line zelf, wrapper doet niets behalve maskeren
			{ y: 115 },
			{
				y: 0,
				stagger: 0.15,
				delay: 0.1,
				duration: 1,
				ease: "power3.out",
			},
		);

		gsap.fromTo(
			".main-content",
			{ opacity: 0 },
			{
				opacity: 1,
				duration: 1,
				delay: 1.45,
			},
		);

		function animateHeadingOnScroll(selector) {
			// Split de tekst in lines
			const split = new window.SplitType(selector, {
				types: "lines",
				lineClass: "line",
			});

			// Wrap elke line in een extra div voor maskering
			split.lines.forEach((line) => {
				const wrapper = document.createElement("div");
				wrapper.classList.add("line-wrapper-title");
				line.parentNode.insertBefore(wrapper, line);
				wrapper.appendChild(line);
			});

			// GSAP animatie op scroll
			gsap.fromTo(
				`${selector} .line`, // of `.line` als dat voldoende is
				{ y: 115 },
				{
					y: 0,
					ease: "power3.out",
					stagger: 0.1,
					scrollTrigger: {
						trigger: selector,
						start: "top 100%",
						end: "top 50%",
						markers: false, // test marker, wegdoen als klaar
						scrub: true,
					},
				},
			);
		}

		animateHeadingOnScroll(".over h2");
		animateHeadingOnScroll(".behandelingen h2");
		animateHeadingOnScroll(".contact h2");

		gsap.set(".kaart", {
			scale: 0.4,
		});

		gsap.to(".kaart", {
			scale: 1,
			ease: "power2.out",
			scrollTrigger: {
				trigger: ".contact",
				start: "top bottom",
				end: "80% center",
				scrub: true,
				markers: false,
			},
		});
	});
</script>

<style>
	section {
		padding: 30px 20px 10px 20px;
		display: flex;
		flex-direction: column;
	}

	h1 {
		font-size: 34px;
		max-width: 90%;
		line-height: 1.2;
		padding-bottom: 20px;
	}

	h2 {
		font-size: 28px;
	}

	.hero {
		position: relative;
	}

	.hero p {
		margin-bottom: 40px;
	}

	p {
		line-height: 1.2;
		letter-spacing: 1.1px;
		padding-bottom: 20px;
	}

	a {
		display: flex;
		align-items: center;
		justify-content: space-between;
		border-bottom: 2px solid var(--text-color);
		margin-bottom: 10px;
	}

	a:nth-of-type(2) {
		margin-bottom: 80px;
	}

	a div {
		display: flex;
		justify-content: center;
		align-items: center;
		margin-right: 5px;
	}

	.line-wrapper-title {
		position: relative;
		clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
	}

	.line {
		display: inline-block;
		transform: translateY(115px);
		transition: transform 0.5s ease-out;
	}

	.hero-image {
		position: relative;
		width: 100vw;
		height: auto;
		right: -20px;
		margin-left: auto;
		overflow: hidden;
		z-index: 10;
		padding-top: 50px;
	}

	img {
		width: 100%;
		height: auto;
		border-radius: 0px;
	}

	.over {
		position: relative;
	}

	.over h2 {
		width: 80%;
		margin-left: auto;
		padding: 20px 0 20px 0;
	}

	.over p {
		width: 80%;
		margin-left: auto;
	}

	.spinner {
		position: relative;
	}

	.left {
		position: absolute;
		left: -15%;
		top: 60%;
	}

	@media screen and (min-width: 351px) {
		.left {
			top: 55%;
		}
	}

	@media screen and (min-width: 440px) {
		.left {
			top: 52%;
			scale: 1.15;
		}
	}

	.right {
		position: absolute;
		right: -15%;
		top: -80px;
		z-index: -10;
	}

	.over a {
		width: 80%;
		margin-left: auto;
		margin-bottom: 30px;
	}

	.over .hero-image {
		position: relative;
		width: 100vw;
		height: auto;
		left: -60px;
		margin-right: auto;
		overflow: hidden;
		z-index: 10;
		right: 0
	}

	.behandelingen {
		/* position: relative; */
		padding: 0;
	}

	.behandelingen h2 {
		padding: 50px 0 20px 20px;
	}

	.behandelingen-text {
		padding: 10px 20px;
	}

	.behandelingen ul {
		list-style: none;
		margin-top: 40px;
	}

	.behandelingen a {
		padding: 20px 0 20px 20px;
		margin: 0;
		border-top: 2px solid var(--text-color);
		border-bottom: 0;
	}

	.behandelingen ul li:nth-of-type(6) {
		border-bottom: 2px solid var(--text-color);
		margin-bottom: 30px;
	}

	.behandelingen-info {
		opacity: 0;
		max-height: 0;
		overflow: hidden;
		padding: 0 20px;
		padding-bottom: 0;
		transition:
			opacity 0.2s ease-out,
			max-height 0.4s ease-out 0.2s,
			padding-bottom 0.4s ease-out 0.2s; /* Padding-bottom transitie toegevoegd */
	}

	.behandelingen-button {
		transition: transform 0.2s linear;
	}

	.behandelingen-button.rotate {
		transform: rotate(45deg);
	}

	.behandelingen-info.active {
		opacity: 1;
		max-height: 300px;
		padding-bottom: 20px; /* Hier de padding laten groeien */
		transition:
			max-height 0.4s ease-out,
			opacity 0.2s ease-out 0.25s,
			padding-bottom 0.4s ease-out; /* Padding loopt synchroon met max-height */
	}

	li a div {
		margin-right: 25px;
	}

	.contact {
		margin: 30px 0;
	}

	.contact h2 {
		margin-bottom: 30px;
	}

	.contact p span {
		font-weight: bold;
	}

	.contact a {
		margin-top: 10px;
	}

	.kaart {
		padding: 60px 0px;
		transform-origin: center center;
		will-change: transform; /* voor performance */
	}

	.kaart iframe {
		width: 100%;
		aspect-ratio: 1 / 1;
		height: auto; /* Zorgt dat height automatisch blijft */
	}

	@media screen and (min-width: 1080px) {
		section {
			flex-direction: row;
			padding: 60px 40px 10px 40px;
		}

		.hero-content {
			min-width: 50%;
		}

		h1 {
			font-size: 48px;
			max-width: 90%;
			line-height: 1.1;
			padding-bottom: 30px;
		}

		p {
			font-size: 24px;
		}

		a {
			display: flex;
			align-items: center;
			justify-content: space-between;
			border-bottom: 3px solid var(--text-color);
			margin-bottom: 20px;
			font-size: 24px;
		}

		a:nth-of-type(2) {
			margin-bottom: 20px;
		}

		a div {
			display: flex;
			justify-content: center;
			align-items: center;
			margin-right: 5px;
			width: 30px;
			height: 30px;
		}

		a div svg {
			width: 30px;
			height: 30px;
		}

		.hero p {
			margin-bottom: 30px;
		}

		.hero-image {
			right: -100px;
			width: 62vw;
		}

		img {
			height: auto;
			border-radius: 0px;
		}

		.over {
			display: flex;
			flex-direction: row-reverse;
			position: relative;
			padding: 200px 0px;
		}

		.over-content {
			display: flex;
			flex-direction: column;
			width: 100%;
			min-width: 450px;
			padding: 120px 40px 0 80px;
		}

		h2 {
			font-size: 40px;
		}

		.over h2 {
			width: 100%;
			margin-left: 0;
			padding: 20px 0 40px 0;
		}

		.over p {
			width: 100%;
			margin-left: 0;
			padding-bottom: 40px;
		}

		.over a {
			width: 95%;
			margin: 0;
		}

		.over .hero-image {
			/* left: -100px; */
			transform: scaleX(-1);
			left: -100px;
			overflow: visible;
			right: 0;
		}

		.over .hero-image img {
			width: 52vw;
			height: auto;
		}

		.left {
			position: absolute;
			scale: 1.8;
			left: -3%;
			top: 130%;
		}

		.behandelingen {
			display: flex;
			flex-direction: column;
			padding: 100px 40px 60px 40px;
			width: 60vw;
		}

		.behandelingen h2 {
			padding-bottom: 30px;
		}

		.right {
			display: none;
		}

		.contact {
			display: flex;
			flex-direction: row-reverse;
			padding: 100px 40px;
			align-items: center;
		}

		.contact-content {
			display: flex;
			flex-direction: column;
			width: 100%;
			margin-left: auto;
			/* padding-top: 110px; */
		}

		.kaart {
			padding: 0 60px 0 0;
		}
	}

	@media screen and (min-width: 1280px) {
		section {
			flex-direction: row;
			padding: 60px 60px 10px 60px;
		}

		.hero-content {
			max-width: 50%;
		}

		h1 {
			font-size: 64px;
			max-width: 90%;
			line-height: 1.1;
			padding-bottom: 30px;
		}

		p {
			font-size: 28px;
		}

		a {
			font-size: 28px;
		}

		a div {
			display: flex;
			justify-content: center;
			align-items: center;
			margin-right: 5px;
			width: 40px;
			height: 40px;
		}

		a div svg {
			width: 40px;
			height: 40px;
		}

		.hero p {
			margin-bottom: 30px;
		}

		.hero-image {
			right: -100px;
		}

		img {
			width: 55vw;
			border-radius: 0px;
		}

		.over {
			padding: 200px 0px;
		}

		.over-content {
			display: flex;
			flex-direction: column;
			width: 100%;
			min-width: 450px;
			padding: 120px 60px 0 280px;
		}

		h2 {
			font-size: 48px;
		}

		.over h2 {
			width: 100%;
			margin-left: 0;
			padding: 20px 0 40px 0;
		}

		.over p {
			width: 100%;
			margin-left: 0;
			padding-bottom: 40px;
		}

		.over a {
			width: 95%;
			margin: 0;
		}

		.over .hero-image {
			/* left: -100px; */
			width: 62vw;
			left: 100px;
			overflow: visible;
			right: 0;
		}

		.over .hero-image img {
			width: 160%;
			height: auto;
		}

		.left {
			position: absolute;
			scale: 2.4;
			left: -3%;
			top: 120%;
		}

		.behandelingen {
			display: flex;
			flex-direction: column;
			padding: 100px 60px 60px 60px;
			width: 45vw;
		}

		.behandelingen h2 {
			padding-bottom: 30px;
		}

		.right {
			display: none;
		}

		.contact {
			padding: 200px 40px;
			align-items: center;
		}

		.kaart {
			padding: 0 100px 0 0;
		}
	}
</style>
